{"version":3,"sources":["api/keyboard.ts","components/Character.tsx","components/Reset.tsx","components/Screen.tsx","App.tsx","index.tsx"],"names":["initialKeyboard","Space","ArrowLeft","ArrowRight","Container","styled","div","width","height","Animation","keyframes","SpriteImage","motion","isFlip","backgroundImage","process","transform","undefined","animation","Character","keyboard","useState","setMotion","setIsFlip","useEffect","memo","Reset","styles","css","emotionReset","Screen","children","App","setKeyboard","onKeyboard","useCallback","prev","callback","window","addEventListener","code","Object","keys","includes","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"2KAMaA,EAA4B,CACvCC,OAAO,EACPC,WAAW,EACXC,YAAY,G,8BCHRC,EAAYC,IAAOC,IAAI,CAC3BC,MAAO,IACPC,OAAQ,MAGJC,EAAYC,oBAAH,0GAYTC,EAAcN,IAAOC,KAAkB,gBAAGM,EAAH,EAAGA,OAAQC,EAAX,EAAWA,OAAX,MAAyB,CACpEL,OAAQ,OACRM,gBAAgB,OAAD,OAASC,cAAT,4BAAmDH,EAAnD,SACfI,UAAWH,EAAS,uBAAoBI,EACxCC,UAAU,GAAD,OAAKT,EAAL,gCAOLU,EAA4B,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACnC,EAA4BC,mBAAiB,QAA7C,mBAAOT,EAAP,KAAeU,EAAf,KACA,EAA4BD,oBAAS,GAArC,mBAAOR,EAAP,KAAeU,EAAf,KAoBA,OAlBAC,qBAAU,WACJJ,EAASlB,YAAckB,EAASjB,YAC9BiB,EAASlB,WACXqB,GAAU,GAGRH,EAASjB,YACXoB,GAAU,GAGZD,EAAU,QACDF,EAASnB,MAClBqB,EAAU,UAEVA,EAAU,UAEX,CAACF,IAGF,cAAChB,EAAD,UACE,cAACO,EAAD,CAAaC,OAAQA,EAAQC,OAAQA,OAK5BY,iBAAKN,G,iBC3DdO,EAAQ,WACZ,OACE,cAAC,SAAD,CACEC,OAAQC,cAAF,uQACFC,QAaKJ,iBAAKC,GClBdtB,EAAYC,IAAOC,IAAI,CAC3BE,OAAQ,UAOJsB,EAAsB,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAC7B,OAAO,cAAC,EAAD,UAAYA,KAGNN,iBAAKK,GCNdE,EAAM,WACV,MAAgCX,mBAASrB,GAAzC,mBAAOoB,EAAP,KAAiBa,EAAjB,KAEMC,EAAaC,uBAAY,SAACf,GAC9Ba,GAAY,SAACG,GAAD,mBAAC,eAAeA,GAAShB,QACpC,IAMH,OAJAI,qBAAU,WJAyB,IAACa,IICZH,EJAxBI,OAAOC,iBAAiB,WAAW,YAAe,IAAZC,EAAW,EAAXA,KAChCC,OAAOC,KAAK1C,GAAiB2C,SAASH,IACxCH,EAAS,eAAGG,GAAO,OAIvBF,OAAOC,iBAAiB,SAAS,YAAe,IAAZC,EAAW,EAAXA,KAC9BC,OAAOC,KAAK1C,GAAiB2C,SAASH,IACxCH,EAAS,eAAGG,GAAO,SIPpB,CAACN,IAGF,qCACE,cAAC,EAAD,IAEA,cAAC,EAAD,UACE,cAAC,EAAD,CAAWd,SAAUA,UAMdK,iBAAKO,GC1BpBY,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.30f39724.chunk.js","sourcesContent":["export type Keyboard = {\r\n  Space: boolean;\r\n  ArrowLeft: boolean;\r\n  ArrowRight: boolean;\r\n};\r\n\r\nexport const initialKeyboard: Keyboard = {\r\n  Space: false,\r\n  ArrowLeft: false,\r\n  ArrowRight: false,\r\n};\r\n\r\nexport type KeyboardEvent = { [key: string]: boolean };\r\n\r\ntype Callback = (keyboardEvent: KeyboardEvent) => void;\r\n\r\nexport const keyboardEventListener = (callback: Callback) => {\r\n  window.addEventListener('keydown', ({ code }) => {\r\n    if (Object.keys(initialKeyboard).includes(code)) {\r\n      callback({ [code]: true });\r\n    }\r\n  });\r\n\r\n  window.addEventListener('keyup', ({ code }) => {\r\n    if (Object.keys(initialKeyboard).includes(code)) {\r\n      callback({ [code]: false });\r\n    }\r\n  });\r\n};\r\n","import { FC, memo, useEffect, useState } from 'react';\r\nimport { keyframes } from '@emotion/react';\r\nimport styled from '@emotion/styled';\r\n\r\nimport { Keyboard } from '../api/keyboard';\r\n\r\nconst Container = styled.div({\r\n  width: 377,\r\n  height: 458,\r\n});\r\n\r\nconst Animation = keyframes`\r\n  from { background-position-x: 0 }\r\n  to { background-position-x: -3770px }\r\n`;\r\n\r\ntype Motion = 'idle' | 'run' | 'attack';\r\n\r\ninterface ISpriteImage {\r\n  motion: Motion;\r\n  isFlip: boolean;\r\n}\r\n\r\nconst SpriteImage = styled.div<ISpriteImage>(({ motion, isFlip }) => ({\r\n  height: '100%',\r\n  backgroundImage: `url(${process.env.PUBLIC_URL}/image/character/${motion}.png)`,\r\n  transform: isFlip ? 'rotateY(180deg)' : undefined,\r\n  animation: `${Animation} 0.5s infinite steps(10)`,\r\n}));\r\n\r\ninterface ICharacter {\r\n  keyboard: Keyboard;\r\n}\r\n\r\nconst Character: FC<ICharacter> = ({ keyboard }) => {\r\n  const [motion, setMotion] = useState<Motion>('idle');\r\n  const [isFlip, setIsFlip] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (keyboard.ArrowLeft !== keyboard.ArrowRight) {\r\n      if (keyboard.ArrowLeft) {\r\n        setIsFlip(true);\r\n      }\r\n\r\n      if (keyboard.ArrowRight) {\r\n        setIsFlip(false);\r\n      }\r\n\r\n      setMotion('run');\r\n    } else if (keyboard.Space) {\r\n      setMotion('attack');\r\n    } else {\r\n      setMotion('idle');\r\n    }\r\n  }, [keyboard]);\r\n\r\n  return (\r\n    <Container>\r\n      <SpriteImage motion={motion} isFlip={isFlip} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default memo(Character);\r\n","import { memo } from 'react';\r\nimport { Global, css } from '@emotion/react';\r\nimport emotionReset from 'emotion-reset';\r\n\r\nconst Reset = () => {\r\n  return (\r\n    <Global\r\n      styles={css`\r\n        ${emotionReset}\r\n\r\n        *, *::after, *::before {\r\n          box-sizing: border-box;\r\n          -moz-osx-font-smoothing: grayscale;\r\n          -webkit-font-smoothing: antialiased;\r\n          font-smoothing: antialiased;\r\n        }\r\n      `}\r\n    />\r\n  );\r\n};\r\n\r\nexport default memo(Reset);\r\n","import { FC, memo, ReactNode } from 'react';\r\nimport styled from '@emotion/styled';\r\n\r\nconst Container = styled.div({\r\n  height: '100vh',\r\n});\r\n\r\ninterface IScreen {\r\n  children: ReactNode;\r\n}\r\n\r\nconst Screen: FC<IScreen> = ({ children }) => {\r\n  return <Container>{children}</Container>;\r\n};\r\n\r\nexport default memo(Screen);\r\n","import { memo, useCallback, useEffect, useState } from 'react';\r\n\r\nimport {\r\n  initialKeyboard,\r\n  KeyboardEvent,\r\n  keyboardEventListener,\r\n} from './api/keyboard';\r\nimport { Character, Reset, Screen } from './components';\r\n\r\nconst App = () => {\r\n  const [keyboard, setKeyboard] = useState(initialKeyboard);\r\n\r\n  const onKeyboard = useCallback((keyboard: KeyboardEvent) => {\r\n    setKeyboard((prev) => ({ ...prev, ...keyboard }));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    keyboardEventListener(onKeyboard);\r\n  }, [onKeyboard]);\r\n\r\n  return (\r\n    <>\r\n      <Reset />\r\n\r\n      <Screen>\r\n        <Character keyboard={keyboard} />\r\n      </Screen>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default memo(App);\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}